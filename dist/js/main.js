(()=>{var e={425:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw l}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function a(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"handleDragStart",(function(e){e.currentTarget.style.opacity="0.4",t.dragSrcEl=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t.dragSrcEl.innerHTML)})),a(this,"handleDragEnd",(function(e){e.currentTarget.style.opacity="1";var t=document.querySelectorAll(".js-omf-repeat-field");t.length&&t.forEach((function(e){e.classList.remove("over")}))})),a(this,"handleDragOver",(function(e){return e.preventDefault&&e.preventDefault(),!1})),a(this,"handleDragEnter",(function(e){e.currentTarget.classList.add("over")})),a(this,"handleDragLeave",(function(e){e.currentTarget.classList.remove("over")})),a(this,"handleDrop",(function(e){return e.stopPropagation(),t.dragSrcEl!==e.currentTarget&&(t.dragSrcEl.innerHTML=e.currentTarget.innerHTML,e.currentTarget.innerHTML=e.dataTransfer.getData("text/html"),t.addChangeTitleEvent(t.dragSrcEl.querySelector(".js-omf-input-field-title")),t.addChangeTitleEvent(e.currentTarget.querySelector(".js-omf-input-field-title")),t.addRemoveEvent(t.dragSrcEl.querySelector(".js-omf-remove")),t.addRemoveEvent(e.currentTarget.querySelector(".js-omf-remove")),t.addToggleFieldEvent(t.dragSrcEl.querySelector(".js-omf-toggle")),t.addToggleFieldEvent(e.currentTarget.querySelector(".js-omf-toggle")),t.updateFieldIndex()),!1})),this.repeatField()}var r,o,l;return r=e,(o=[{key:"repeatField",value:function(){this.repeatCount=this.getRepeatFieldCount(),this.addRepeatFieldEvent(),this.removeRepeatFieldEvent(),this.toggleFieldEvent(),this.changeTitleEvent(),this.dragEvent()}},{key:"getRepeatFieldCount",value:function(){var e=1,t=document.querySelectorAll(".js-omf-repeat-field");if(!t.length)return e;var r=t[t.length-1].dataset.omfValidationCount;return e=r?Number(r)+1:e}},{key:"removeRepeatFieldEvent",value:function(){var e=document.querySelectorAll(".js-omf-remove");if(e.length){var r,n=t(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addRemoveEvent(a)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"addRemoveEvent",value:function(e){var t=this;e&&e.addEventListener("click",(function(e){e.preventDefault(),t.removeRepeatField(e)}),!1)}},{key:"removeRepeatField",value:function(e){var t=e.currentTarget.closest(".js-omf-repeat-field");t&&t.remove()}},{key:"addRepeatFieldEvent",value:function(){var e=this,t=document.querySelector("#js-omf-repeat-add-button");t&&t.addEventListener("click",(function(t){t.preventDefault(),e.addRepeatField(t)}),!1)}},{key:"addRepeatField",value:function(e){var r=document.querySelectorAll(".js-omf-repeat-field");if(r.length){var n,a=r[r.length-1],o=a.cloneNode(!0),l=a.insertAdjacentElement("afterend",o),i=l.querySelectorAll('[name^="cf_omf_validation"]'),u=0,d=t(i);try{for(d.s();!(n=d.n()).done;){var c=n.value;c.name=this.replaceBracketsWithText(c.name,this.repeatCount),c.value=1==c.value?1:"",c.setAttribute("value",c.value),c.removeAttribute("checked"),u===i.length-1&&(this.repeatCount=this.extractBracketContents(c.name)+1),u++}}catch(e){d.e(e)}finally{d.f()}var f=l.querySelector(".js-omf-field-title");f&&(f.textContent=""),this.addChangeTitleEvent(l.querySelector(".js-omf-input-field-title")),this.addRemoveEvent(l.querySelector(".js-omf-remove")),this.addToggleFieldEvent(l.querySelector(".js-omf-toggle")),this.addDragEvent(l)}}},{key:"replaceBracketsWithText",value:function(e,t){return e.replace(/(cf_omf_validation\[)(\d+)(\])/g,"$1".concat(t,"$3"))}},{key:"extractBracketContents",value:function(e){var t=e.match(/cf_omf_validation\[(\d+)\]/);return t?Number(t[1]):null}},{key:"toggleFieldEvent",value:function(){var e=document.querySelectorAll(".js-omf-toggle");if(e.length){var r,n=t(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addToggleFieldEvent(a)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"addToggleFieldEvent",value:function(e){var t=this;e&&e.addEventListener("click",(function(e){e.preventDefault(),t.toggleField(e)}),!1)}},{key:"toggleField",value:function(e){var t=e.currentTarget.closest(".js-omf-repeat-field");if(t){var r=t.querySelector(".js-omf-toggle-field");r&&(r.classList.contains("open")?r.classList.remove("open"):r.classList.add("open"))}}},{key:"changeTitleEvent",value:function(){var e=document.querySelectorAll(".js-omf-input-field-title");if(e.length){var r,n=t(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.addChangeTitleEvent(a)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"addChangeTitleEvent",value:function(e){var t=this;e&&e.addEventListener("input",(function(e){e.preventDefault(),t.changeTitle(e)}),!1)}},{key:"changeTitle",value:function(e){var t=e.currentTarget,r=t.closest(".js-omf-repeat-field");if(r){var n=r.querySelector(".js-omf-field-title");n&&(n.textContent=t.value,t.setAttribute("value",t.value))}}},{key:"dragEvent",value:function(){var e=this,t=document.querySelectorAll(".js-omf-repeat-field");t.length&&(this.dragSrcEl=null,t.forEach((function(t){e.addDragEvent(t)})))}},{key:"addDragEvent",value:function(e){e.addEventListener("dragstart",this.handleDragStart),e.addEventListener("dragover",this.handleDragOver),e.addEventListener("dragenter",this.handleDragEnter),e.addEventListener("dragleave",this.handleDragLeave),e.addEventListener("dragend",this.handleDragEnd),e.addEventListener("drop",this.handleDrop)}},{key:"updateFieldIndex",value:function(){var e=document.querySelectorAll(".js-omf-repeat-field");if(!e.length)return fieldCount;var r,n=t(e);try{for(n.s();!(r=n.n()).done;){var a,o=r.value,l=o.dataset.omfValidationCount,i=t(o.querySelectorAll('[name^="cf_omf_validation"]'));try{for(i.s();!(a=i.n()).done;){var u=a.value;u.name=this.replaceBracketsWithText(u.name,l)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}}}])&&n(r.prototype,o),l&&n(r,l),Object.defineProperty(r,"prototype",{writable:!1}),e}())}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(425)})()})();
//# sourceMappingURL=main.js.map